<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ExploreWorld</title>
  <meta name="description" content="ExploreWorld — Strengthening global connections through culture. Plateforme bilingue FR/EN pour découvrir les cultures du monde.">
  <style>
    /* ========== Style (modern, white + soft blue/orange gradient) ========== */
    :root{
      --blue:#1a73e8;
      --blue-dark:#063a66;
      --orange:#ff9a2e;
      --bg-grad: linear-gradient(135deg, rgba(26,115,232,0.12), rgba(245,162,35,0.06));
      --card-shadow: 0 10px 30px rgba(2,46,82,0.08);
      --muted:#6b7280;
      --radius:12px;
      --glass: rgba(255,255,255,0.92);
      font-family: "Poppins", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;background:linear-gradient(180deg,#ffffff,#fbfdff);color:#0b2030}
    a{color:var(--blue)}
    /* header */
    header.site-header{background:var(--bg-grad);padding:14px 18px;display:flex;align-items:center;justify-content:space-between;gap:12px;position:sticky;top:0;backdrop-filter: blur(4px);z-index:40}
    .brand{display:flex;align-items:center;gap:12px}
    #logoImg{width:64px;height:64px;border-radius:10px;object-fit:cover;display:block}
    .brand-text{display:flex;flex-direction:column;line-height:1}
    .brand-title{font-weight:700;font-size:1.15rem;margin:0}
    .brand-slogan{font-size:0.82rem;color:var(--muted);opacity:0.95}
    .header-actions{display:flex;gap:10px;align-items:center}
    .lang-btn{background:transparent;border:1px solid rgba(10,20,30,0.06);padding:8px 12px;border-radius:999px;cursor:pointer;font-weight:600}
    /* container */
    main.container{max-width:1100px;margin:22px auto;padding:0 14px}
    .view{display:none;animation:fadeIn .38s ease both}
    .view.active{display:block}
    @keyframes fadeIn{from{opacity:0;transform:translateY(6px)}to{opacity:1;transform:none}}
    /* hero */
    .hero{background:var(--glass);border-radius:14px;padding:36px;text-align:center;box-shadow:var(--card-shadow);border:1px solid rgba(10,20,30,0.03)}
    .hero h2{margin:6px 0;font-size:1.8rem}
    .lead{color:var(--muted);margin:12px 0}
    .cta{display:inline-block;background:linear-gradient(180deg,#2a77ff,var(--blue));color:white;padding:14px 28px;border-radius:40px;border:none;cursor:pointer;font-weight:700;box-shadow:0 10px 26px rgba(26,115,232,0.18)}
    .cta.secondary{background:white;color:var(--blue-dark);border:1px solid rgba(10,20,30,0.04)}
    .muted{color:var(--muted)}
    /* card */
    .card{background:white;padding:18px;border-radius:12px;box-shadow:var(--card-shadow);border:1px solid rgba(10,20,30,0.03)}
    .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:14px}
    /* chips & lists */
    .chips{display:flex;flex-wrap:wrap;gap:10px;margin-top:10px}
    .chip{background:linear-gradient(180deg,#fff,#f7fbff);border-radius:999px;padding:8px 14px;border:1px solid rgba(10,20,30,0.04);cursor:pointer;font-weight:600}
    .chip:hover{transform:translateY(-2px);box-shadow:0 8px 18px rgba(10,20,30,0.06)}
    .list{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:12px;margin-top:12px}
    .country{display:flex;gap:12px;align-items:center;padding:10px;border-radius:10px;border:1px solid #eef3fb;cursor:pointer;background:linear-gradient(180deg,#fff,#fbfeff)}
    .country img.flag{width:64px;height:42px;object-fit:cover;border-radius:6px;border:1px solid #e6eefb}
    .flag-large{width:220px;height:auto;border-radius:8px;box-shadow:0 8px 20px rgba(2,46,82,0.06)}
    /* modal */
    .modal-back{position:fixed;inset:0;background:rgba(3,10,20,0.45);display:flex;align-items:center;justify-content:center;z-index:999}
    .modal{width:96%;max-width:560px;background:white;border-radius:12px;padding:18px;box-shadow:var(--card-shadow)}
    .modal h3{margin:0 0 8px}
    .form-row{display:flex;flex-direction:column;gap:8px;margin-top:10px}
    input[type="email"],input[type="tel"],input[type="search"]{padding:10px;border-radius:10px;border:1px solid #e9eef6}
    label{font-weight:600;font-size:0.95rem}
    .footer{margin:28px 0;text-align:center;color:var(--muted);font-size:0.95rem}
    /* responsive */
    @media(max-width:880px){
      .brand-title{font-size:1rem}
      .hero h2{font-size:1.4rem}
      .list{grid-template-columns:repeat(auto-fill,minmax(160px,1fr))}
    }
  </style>
</head>
<body>

  <!-- HEADER - Logo + slogan on all pages -->
  <header class="site-header" role="banner">
    <div class="brand">
      <!-- If you upload assets/logo-worldlink.png it will show; otherwise text remains -->
      <img id="logoImg" src="assets/logo-worldlink.png" alt="ExploreWorld logo" onerror="this.style.display='none'">
      <div class="brand-text">
        <div class="brand-title">ExploreWorld</div>
        <div class="brand-slogan">Strengthening global connections through culture — Du local à l’universel</div>
      </div>
    </div>

    <div class="header-actions">
      <button id="langToggle" class="lang-btn" aria-label="Toggle language">EN</button>
    </div>
  </header>

  <!-- MAIN -->
  <main class="container" role="main">

    <!-- HOME -->
    <section id="homeView" class="view active">
      <div class="hero">
        <h2 data-i18n="welcome">Bienvenue — Welcome</h2>
        <p class="lead" data-i18n="lead">Découvrez les cultures, histoires et traditions du monde.</p>
        <div style="height:12px"></div>
        <button id="exploreNow" class="cta" aria-haspopup="dialog" data-i18n="exploreBtn">Explorer maintenant / Explore now</button>
        <div style="height:12px"></div>
        <p class="muted">Application bientôt disponible • Version bilingue FR / EN</p>
      </div>
      <div style="height:18px"></div>
      <div class="card">
        <h3>Pourquoi ExploreWorld ?</h3>
        <p class="muted">Une plateforme pour découvrir chaque culture en détail : langages, comportements, croyances, vêtements, légendes et plus — conçue pour apprendre et connecter.</p>
      </div>
    </section>

    <!-- ABOUT -->
    <section id="aboutView" class="view">
      <div class="card">
        <h2 data-i18n="aboutTitle">À propos / About</h2>
        <p data-i18n="aboutText">ExploreWorld réunit le monde à travers la culture. Notre mission : rapprocher les peuples en partageant histoires, traditions et langues.</p>
        <blockquote style="font-style:italic;border-left:3px solid rgba(10,20,30,0.06);padding-left:10px;color:#444;margin:12px 0">« Internet appartient à ceux qui osent créer. »</blockquote>
        <div style="display:flex;gap:12px;flex-wrap:wrap;margin-top:10px">
          <button class="cta" id="discoverBtn" data-i18n="discover">Découvrir le monde / Discover the world</button>
          <button class="cta secondary" onclick="showView('homeView')" data-i18n="back">Retour</button>
        </div>
      </div>
    </section>

    <!-- EXPLORE -->
    <section id="exploreView" class="view">
      <div class="card">
        <h2 data-i18n="exploreTitle">Explorer / Explore</h2>

        <div style="display:flex;gap:16px;flex-wrap:wrap;margin-top:10px">
          <div style="flex:1;min-width:240px">
            <label data-i18n="chooseContinent">Choisissez un continent / Choose a continent</label>
            <div id="continents" class="chips" aria-label="Continents list"></div>
          </div>

          <div style="flex:2;min-width:260px">
            <label data-i18n="searchCountry">Rechercher un pays / Search country</label>
            <input id="countrySearch" type="search" placeholder="Ex: Sénégal / Senegal" />
            <div id="countriesList" class="list" aria-live="polite" style="margin-top:10px"></div>
          </div>
        </div>

        <div id="countryDetail" class="card" style="margin-top:12px;display:none">
          <h3 id="countryName"></h3>
          <img id="countryFlag" class="flag-large" alt="flag"/>
          <p id="countryRegion" class="muted"></p>
          <div id="cultureDetails" style="margin-top:8px"></div>
          <div style="margin-top:10px;display:flex;gap:10px">
            <button class="cta" onclick="showView('premiumView')" data-i18n="seePremium">Voir contenu premium</button>
            <button class="cta secondary" onclick="closeCountryDetail()" data-i18n="back">Retour</button>
          </div>
        </div>
      </div>
    </section>

    <!-- PREMIUM -->
    <section id="premiumView" class="view">
      <div class="card">
        <h2 data-i18n="premiumTitle">Premium</h2>
        <p data-i18n="premiumIntro">Accès aux histoires exclusives, sans publicité et contenus approfondis.</p>
        <div class="grid" style="margin-top:10px">
          <div class="card">
            <h3>500 F / mois</h3>
            <p class="muted">Découverte — 5 F crédit/vidéo (démo)</p>
          </div>
          <div class="card">
            <h3>1500 F / mois</h3>
            <p class="muted">Explorateur — 15 F crédit/vidéo</p>
          </div>
          <div class="card">
            <h3>3000 F / mois</h3>
            <p class="muted">Ambassadeur — 50 F crédit/vidéo</p>
          </div>
        </div>

        <div style="margin-top:12px">
          <p class="muted">Paiement simulé dans cette version. Pour accepter de vrais paiements, connectez Stripe / PayDunya via un backend sécurisé.</p>
        </div>
      </div>
    </section>

  </main>

  <div class="footer">© ExploreWorld — Internet appartient à ceux qui osent créer. M.T.S</div>

  <!-- ========== Consent modal (collect Gmail + phone) ========== -->
  <div id="consentModal" class="modal-back" style="display:none" role="dialog" aria-modal="true">
    <div class="modal">
      <h3 data-i18n="consentTitle">Avant d'explorer / Before you explore</h3>
      <p data-i18n="consentText">Entrez votre Gmail et votre numéro de téléphone (obligatoire).</p>

      <div class="form-row">
        <label for="emailInput">Gmail *</label>
        <input id="emailInput" type="email" placeholder="exemple@gmail.com" autocomplete="email" />
        <label for="phoneInput">Téléphone *</label>
        <input id="phoneInput" type="tel" placeholder="+221 77 123 45 67" autocomplete="tel" />
      </div>

      <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:12px">
        <button class="cta secondary" onclick="closeConsent()">Annuler</button>
        <button class="cta" id="consentSubmit">Continuer</button>
      </div>

      <p class="muted small" style="margin-top:10px">En donnant vos informations, vous acceptez de recevoir des notifications. Vous pouvez retirer votre consentement à tout moment.</p>
    </div>
  </div>

  <!-- Info modal -->
  <div id="infoModal" class="modal-back" style="display:none"><div class="modal"><button style="float:right" onclick="hideInfo()">✕</button><div id="infoText"></div></div></div>

  <script>
    /* =================== App JS =================== */
    const state = { lang:'fr', countries: [], selectedCountry: null };

    const I18N = {
      fr: {
        welcome:"Bienvenue — Welcome",
        lead:"Découvrez les cultures, histoires et traditions du monde.",
        exploreBtn:"Explorer maintenant / Explore now",
        aboutTitle:"À propos / About",
        aboutText:"ExploreWorld réunit le monde à travers la culture. Notre mission : rapprocher les peuples en partageant histoires, traditions et langues.",
        discover:"Découvrir le monde / Discover the world",
        exploreTitle:"Explorer / Explore",
        chooseContinent:"Choisissez un continent / Choose a continent",
        searchCountry:"Rechercher un pays / Search country",
        consentTitle:"Avant d'explorer / Before you explore",
        consentText:"Entrez votre Gmail et votre numéro de téléphone (obligatoire).",
        continue:"Continuer",
        cancel:"Annuler",
        back:"Retour",
        seePremium:"Voir contenu premium",
        premiumTitle:"Premium",
        premiumIntro:"Accès aux histoires exclusives, sans publicité et contenus approfondis."
      },
      en: {
        welcome:"Welcome — Bienvenue",
        lead:"Discover cultures, stories and traditions from every corner of the world.",
        exploreBtn:"Explore now / Explorer maintenant",
        aboutTitle:"About / À propos",
        aboutText:"ExploreWorld brings the world together through culture. Our mission: to connect people by sharing stories, traditions and languages.",
        discover:"Discover the world / Découvrir le monde",
        exploreTitle:"Explore",
        chooseContinent:"Choose a continent / Choisissez un continent",
        searchCountry:"Search country / Rechercher un pays",
        consentTitle:"Before you explore / Avant d'explorer",
        consentText:"Enter your Gmail and your phone number (required).",
        continue:"Continue",
        cancel:"Cancel",
        back:"Back",
        seePremium:"See premium content",
        premiumTitle:"Premium",
        premiumIntro:"Access exclusive stories, ad-free and in-depth content."
      }
    };

    // ----------------- helpers -----------------
    const $ = id => document.getElementById(id);
    function t(k){ return I18N[state.lang][k] || k; }
    function setText(selector, text){ const el = document.querySelector(selector); if(el) el.textContent = text; }

    // initial
    document.addEventListener('DOMContentLoaded', ()=>{
      // language toggle
      $('langToggle').addEventListener('click', toggleLang);
      // explore flow
      $('exploreNow').addEventListener('click', ()=> openConsent());
      $('discoverBtn').addEventListener('click', ()=> showView('exploreView'));
      // consent submit
      $('consentSubmit').addEventListener('click', submitConsent);
      // country search
      $('countrySearch').addEventListener('input', onCountrySearch);
      // init UI
      renderI18N();
      renderContinents();
    });

    function renderI18N(){
      // update small static texts
      document.querySelectorAll('[data-i18n]').forEach(el=>{
        const key = el.getAttribute('data-i18n');
        el.textContent = t(key);
      });
      // update header lang toggle label
      $('langToggle').textContent = (state.lang === 'fr' ? 'EN' : 'FR');
    }

    function toggleLang(){
      state.lang = (state.lang === 'fr') ? 'en' : 'fr';
      renderI18N();
    }

    function showView(viewId){
      document.querySelectorAll('.view').forEach(v=>v.classList.remove('active'));
      document.querySelectorAll('.view').forEach(v=>v.classList.add('active')); // ensure fallback
      // hide all
      document.querySelectorAll('.view').forEach(v=>v.classList.remove('active'));
      const el = document.getElementById(viewId);
      if(el) el.classList.add('active');
      window.scrollTo({top:0,behavior:'smooth'});
    }

    // ------------- Consent modal (email + phone required) -------------
    function openConsent(){ $('consentModal').style.display = 'flex'; }
    function closeConsent(){ $('consentModal').style.display = 'none'; }
    function submitConsent(){
      const email = $('emailInput').value.trim();
      const phone = $('phoneInput').value.trim();
      if(!email || !phone){
        alert(state.lang === 'fr' ? "Email et téléphone sont obligatoires." : "Email and phone are required.");
        return;
      }
      const user = { email, phone, ts: new Date().toISOString() };
      // Save locally
      localStorage.setItem('explorer_user', JSON.stringify(user));
      // Optionally send to Google Sheets: replace the URL below after deploying Apps Script
      const GOOGLE_SCRIPT_URL = "REPLACE_WITH_YOUR_GOOGLE_SCRIPT_URL";
      if(!GOOGLE_SCRIPT_URL.startsWith('REPLACE')){
        fetch(GOOGLE_SCRIPT_URL, {
          method:'POST',
          headers:{'Content-Type':'application/json'},
          body: JSON.stringify(user)
        }).then(r=>r.json()).then(j=>console.log('sheet ok',j)).catch(e=>console.warn('sheets error',e));
      }
      closeConsent();
      showView('exploreView');
      // show a short thanks
      showInfo((state.lang==='fr'?'Merci — vous pouvez explorer maintenant.':'Thank you — you can now explore.'));
    }

    // ------------- Continents & Countries (RestCountries API) -------------
    const CONTINENTS = ["Africa","Europe","Asia","Americas","Oceania","Antarctic"];
    function renderContinents(){
      const c = $('continents');
      c.innerHTML = '';
      CONTINENTS.forEach(ct=>{
        const btn = document.createElement('button');
        btn.className = 'chip';
        btn.textContent = ct;
        btn.onclick = ()=> selectContinent(ct);
        c.appendChild(btn);
      });
    }

    async function selectContinent(continent){
      // show loading
      const list = $('countriesList');
      list.innerHTML = '<div class="muted">Chargement des pays… / Loading countries...</div>';
      try {
        const res = await fetch(`https://restcountries.com/v3.1/region/${continent}`);
        if(!res.ok) throw new Error('fetch failed');
        const data = await res.json();
        // sort by name.common
        data.sort((a,b)=> (a.name.common > b.name.common ? 1 : -1));
        state.countries = data;
        renderCountries(data);
      } catch(err){
        console.error(err);
        list.innerHTML =
